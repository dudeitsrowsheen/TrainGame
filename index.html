<!DOCTYPE html>
<html>

<head>
    <title>Time Sheet</title>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <style>

    </style>

</head>

<body>
    <script>
        $(function(){
                var firebaseConfig = {
                apiKey: "AIzaSyAyXr18832QzKLQ9AeteinziNcg4I7ZIT8",
                authDomain: "myproject-c06d8.firebaseapp.com",
                databaseURL: "https://myproject-c06d8.firebaseio.com",
                projectId: "myproject-c06d8",
                storageBucket: "myproject-c06d8.appspot.com",
                messagingSenderId: "796262105469",
                appId: "1:796262105469:web:cf6af65aac32e9e0"
            };

            firebase.initializeApp(firebaseConfig);
            var database = firebase.database();

            var name = "";
            var destination = "";
            var firstTrain = 0;
            var frequency = "";


            $("#button").on("click", function (event) {
                event.preventDefault();
                name = $("#name-input").val().trim();
                destination = $("#destination-input").val().trim();
                firstTrain = $("#firstTrain-input").val().trim();
                frequency = $("#frequency-input").val().trim();

                // <results
                database.ref().push({
                    name: name,
                    destination: destination,
                    firstTrain: firstTrain,
                    frequency: frequency,
                    dateAdded: firebase.database.ServerValue.TIMESTAMP
                });
            });


            database.ref().on("child_added", function (snapshot) {
                // storing the snapshot.val() in a variable for convenience
                var train = snapshot.val();

                // Console.loging the last user's data
                console.log(train.name);
                console.log(train.destination);
                console.log(train.firstTrain);
                console.log(frequency);

                // Change the HTML to reflect
                var row = $('<tr>');
                row.append($('<td>').text(sv.name));
                row.append($('<td>').text(sv.destination));
                row.append($('<td>').text(sv.firstTrain));
                row.append($('<td>').text(sv.frequency));
                $('.table').append(row);
                
                // Handle the errors
            }, function (errorObject) {
                console.log("Errors handled: " + errorObject.code);
            });
        });
    </script>
    <!-- <span id="click-value"></span> -->
    <div class="container">
        <div class="jumbotron bg-info text-center">
            <h1>Employee Tracker</h1>
        </div>
        <div class="row-md">
        </div>
        <div class="row-md">
            <form>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Name</label>
                    <input type="text" class="form-control" id="name-input" placeholder="Jonathan Van Ness">
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Destination</label>
                    <input type="text" class="form-control" id="destination-input" placeholder="CEO">
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput1">First Train Time -- in military time</label>
                    <input type="number" class="form-control" id="date-input" placeholder="MM/DD/YY">
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Frequency -- in minutes</label>
                    <input type="text" class="form-control" id="rate-input" placeholder="8000">
                </div>
            </form>
        </div>
        <div class="row">
            <div class="col">
                <button type="submit" class="btn btn-primary" id="button">Submit</button>
            </div>
        </div>
        <br>
        <div class="col-lg-12">
                <!-- <div class="card card-default">
                  <div class="card-header">
                    Most Recent Employee
                  </div>
                  <div class="card-body" id="recent-member">
                    <h2 id="name-display"></h2>
                    <h4 id="destination-display"></h4>
                    <h4 id="date-display"></h4>
                    <p id="rate-display"></p>
                  </div> -->
                  <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Employee Name</th>
                        <th scope="col">destination</th>
                        <th scope="col">Start Date</th>
                        <th scope="col">Months Worked</th>
                        <th scope="col">Monthly Rate ($)</th>
                        <th scope="col">Total Billed ($)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row" id="name-display"></th>
                        <td id="destination-display"></td>
                        <td id="date-display"></td>
                        <td id=""></td>
                        <td id="rate-display"></td>
                        <td id=""></td>
                    </tr>
                </tbody>
            </table>
                </div>
              </div>
        
    </div>
</body>
</body>

</html>